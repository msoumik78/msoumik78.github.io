---
layout: post
title:  "Let's quickly learn MongoDB"
date:   2017-08-24 16:55:23 +0530
categories: NoSQL
---

# MongoDB

MongoDB
is one of the most popular document oriented databases which is a major type of NoSQL database.  The document oriented databases closely resemble RDBMS in the sense that the data is stored in form of documents (which are similar to rows in RDBMS) and the 
documents are stored in collections (which are similar to tables in RDBMS). The biggest difference with RDBMS is that the documents are indeed meant for storing semi structured data and also the documents are completely schema free. This means that in MongoDB
you can go ahead and store documents in collections without even creating the collection in the first place. This also means that MongoDb insert operations are muchfaster than corresponding insert operations of RDBMS.



## Typical CRUD syntax in MongoDB

Following are the useful CRUD commands: 
* db.collectionName.find () : This is the command to fetch documents from MongoDB abd its 
{% highlight ruby %}

// First query below finds employees with title Gupta and second query finds employees who are managers
// Sql equivalent of the first query: Select * from employees where title = "Gupta"
// Sql equivalent of the second query: Select * from employees where designation = "Manager"
db.employees.find("title":"Gupta") 
db.employees.find("designation":"Manager")
 

// One can also select specific columns instead of all columns 
// Sql equivalent : Select name, age from employees where title = "Gupta"
db.employees.find("title":"Gupta" , {name: 1, age:1}) 

// One can also limit specific rows 
// Sql equivalent : Select name, age from employees where title = "Gupta" LIMIT 5
db.employees.find("title":"Gupta" , {name: 1, age:1}).limit(5) 

// One can also sort the output 
// Sql equivalent : Select * employees order by title ASC name DESC
db.employees.find.sort("title":"1" , "name" : "-1") 

{% endhighlight %}

* db.collectionName.insert ()
* db.collectioName.update (, $set )First argument is used to identify the document and second argument after $set to set the data.
* db.collectionName.remove()


## MongoDB Replication & Sharding

How to create a sharded cluster in MongoDB
* First start mongod process in 3 machines (using the command : mongod -host <> - port 27017 – replySet <> 
* Then connect a mongo process to any one instance and issue the commands (rs.initialize() and 
  then rs.add <Second Server> and rs.add <Third Server>
  * After that start the 3 config servers with the command (mongod – configServr -replySet <>
  * After that start the mongos instance using the command (mongos -cnfigdb ConfigDb1:ConfigDB2:ConfigDB3)
  * After that , start a mongo process and connect to the mongos instance and issue the command 
    (sh.addShard  (rs1/ReplicaInatance1:ReplicaInstance2:ReplicaInatance3)
